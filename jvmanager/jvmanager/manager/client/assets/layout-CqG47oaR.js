import{a as w,z as Y,A as Q,v as _,w as ue,O as ge,B as ve}from"./chunk-QMGIS6GS-CBZUm-7V.js";import{j as i}from"./jsx-runtime-D_zvdyIk.js";import{g as be,U as xe}from"./UserButton-C7P-xVhi.js";import{c as y}from"./createReactComponent-CwEnMXT7.js";import{U as G}from"./Loader-1VreoqJz.js";import{j as N,h as j,B as v,l as M,r as u,k as A,m as je,e as Z,u as ee,n as Ne,I as ke,p as we,i as se,o as te,q as Ae,s as _e,t as Ie}from"./polymorphic-factory-EW0USS3V.js";import{f as O}from"./api-tgDzxHzW.js";import{u as Pe}from"./use-disclosure-DdEYJXX4.js";import{a as Le,u as ye,r as Se}from"./nprogress.store-CG_bDZMJ.js";import{R as oe,u as ze,g as ae,O as Re}from"./OptionalPortal-2PgDA1pn.js";import{u as $e}from"./Input-I-MjqIR2.js";import{c as ne}from"./create-safe-context-CzEsa9t0.js";import{a as Te}from"./Avatar-BMARKXxx.js";import{g as re,a as K}from"./get-sorted-breakpoints-CWbmZd_q.js";import{u as Be}from"./CloseButton-BDZlzHA2.js";import"./events-BOd7YSSb.js";import"./Group-bnACpcuK.js";import"./Text-CkpJSrnl.js";import"./Stack-BsPYYAFq.js";import"./Button-BhC08Y9X.js";import"./index-B4z8r-Ct.js";import"./use-merged-ref-DUVM9oA6.js";import"./px-CiO0pVtX.js";const[Ce,I]=ne("AppShell was not found in tree");var k={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const Ve={},D=N((s,o)=>{const t=j("AppShellAside",Ve,s),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,withBorder:m,zIndex:f,mod:a,...d}=t,h=I();return h.disabled?null:i.jsx(v,{component:"aside",ref:o,mod:[{"with-border":m??h.withBorder},a],...h.getStyles("aside",{className:l,classNames:e,styles:n,style:r}),...d,__vars:{"--app-shell-aside-z-index":`calc(${f??h.zIndex} + 1)`}})});D.classes=k;D.displayName="@mantine/core/AppShellAside";const Oe={},F=N((s,o)=>{var b;const t=j("AppShellFooter",Oe,s),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,withBorder:m,zIndex:f,mod:a,...d}=t,h=I();return h.disabled?null:i.jsx(v,{component:"footer",ref:o,mod:[{"with-border":m??h.withBorder},a],...h.getStyles("footer",{className:M({[oe.classNames.zeroRight]:h.offsetScrollbars},l),classNames:e,styles:n,style:r}),...d,__vars:{"--app-shell-footer-z-index":(b=f??h.zIndex)==null?void 0:b.toString()}})});F.classes=k;F.displayName="@mantine/core/AppShellFooter";const Ee={},q=N((s,o)=>{var b;const t=j("AppShellHeader",Ee,s),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,withBorder:m,zIndex:f,mod:a,...d}=t,h=I();return h.disabled?null:i.jsx(v,{component:"header",ref:o,mod:[{"with-border":m??h.withBorder},a],...h.getStyles("header",{className:M({[oe.classNames.zeroRight]:h.offsetScrollbars},l),classNames:e,styles:n,style:r}),...d,__vars:{"--app-shell-header-z-index":(b=f??h.zIndex)==null?void 0:b.toString()}})});q.classes=k;q.displayName="@mantine/core/AppShellHeader";const De={},H=N((s,o)=>{const t=j("AppShellMain",De,s),{classNames:e,className:l,style:r,styles:n,vars:c,...p}=t,m=I();return i.jsx(v,{component:"main",ref:o,...m.getStyles("main",{className:l,style:r,classNames:e,styles:n}),...p})});H.classes=k;H.displayName="@mantine/core/AppShellMain";function S(s){return typeof s=="object"?s.base:s}function z(s){const o=typeof s=="object"&&s!==null&&typeof s.base<"u"&&Object.keys(s).length===1;return typeof s=="number"||typeof s=="string"||o}function R(s){return!(typeof s!="object"||s===null||Object.keys(s).length===1&&"base"in s)}function Fe({baseStyles:s,minMediaStyles:o,maxMediaStyles:t,aside:e,theme:l}){var p,m,f;const r=e==null?void 0:e.width,n="translateX(var(--app-shell-aside-width))",c="translateX(calc(var(--app-shell-aside-width) * -1))";if(e!=null&&e.breakpoint&&!((p=e==null?void 0:e.collapsed)!=null&&p.mobile)&&(t[e==null?void 0:e.breakpoint]=t[e==null?void 0:e.breakpoint]||{},t[e==null?void 0:e.breakpoint]["--app-shell-aside-width"]="100%",t[e==null?void 0:e.breakpoint]["--app-shell-aside-offset"]="0px"),z(r)){const a=u(S(r));s["--app-shell-aside-width"]=a,s["--app-shell-aside-offset"]=a}if(R(r)&&(typeof r.base<"u"&&(s["--app-shell-aside-width"]=u(r.base),s["--app-shell-aside-offset"]=u(r.base)),A(r).forEach(a=>{a!=="base"&&(o[a]=o[a]||{},o[a]["--app-shell-aside-width"]=u(r[a]),o[a]["--app-shell-aside-offset"]=u(r[a]))})),(m=e==null?void 0:e.collapsed)!=null&&m.desktop){const a=e.breakpoint;o[a]=o[a]||{},o[a]["--app-shell-aside-transform"]=n,o[a]["--app-shell-aside-transform-rtl"]=c,o[a]["--app-shell-aside-offset"]="0px !important"}if((f=e==null?void 0:e.collapsed)!=null&&f.mobile){const a=re(e.breakpoint,l.breakpoints)-.1;t[a]=t[a]||{},t[a]["--app-shell-aside-width"]="100%",t[a]["--app-shell-aside-offset"]="0px",t[a]["--app-shell-aside-transform"]=n,t[a]["--app-shell-aside-transform-rtl"]=c}}function qe({baseStyles:s,minMediaStyles:o,footer:t}){const e=t==null?void 0:t.height,l="translateY(var(--app-shell-footer-height))",r=(t==null?void 0:t.offset)??!0;if(z(e)){const n=u(S(e));s["--app-shell-footer-height"]=n,r&&(s["--app-shell-footer-offset"]=n)}R(e)&&(typeof e.base<"u"&&(s["--app-shell-footer-height"]=u(e.base),r&&(s["--app-shell-footer-offset"]=u(e.base))),A(e).forEach(n=>{n!=="base"&&(o[n]=o[n]||{},o[n]["--app-shell-footer-height"]=u(e[n]),r&&(o[n]["--app-shell-footer-offset"]=u(e[n])))})),t!=null&&t.collapsed&&(s["--app-shell-footer-transform"]=l,s["--app-shell-footer-offset"]="0px !important")}function He({baseStyles:s,minMediaStyles:o,header:t}){const e=t==null?void 0:t.height,l="translateY(calc(var(--app-shell-header-height) * -1))",r=(t==null?void 0:t.offset)??!0;if(z(e)){const n=u(S(e));s["--app-shell-header-height"]=n,r&&(s["--app-shell-header-offset"]=n)}R(e)&&(typeof e.base<"u"&&(s["--app-shell-header-height"]=u(e.base),r&&(s["--app-shell-header-offset"]=u(e.base))),A(e).forEach(n=>{n!=="base"&&(o[n]=o[n]||{},o[n]["--app-shell-header-height"]=u(e[n]),r&&(o[n]["--app-shell-header-offset"]=u(e[n])))})),t!=null&&t.collapsed&&(s["--app-shell-header-transform"]=l,s["--app-shell-header-offset"]="0px !important")}function We({baseStyles:s,minMediaStyles:o,maxMediaStyles:t,navbar:e,theme:l}){var p,m,f;const r=e==null?void 0:e.width,n="translateX(calc(var(--app-shell-navbar-width) * -1))",c="translateX(var(--app-shell-navbar-width))";if(e!=null&&e.breakpoint&&!((p=e==null?void 0:e.collapsed)!=null&&p.mobile)&&(t[e==null?void 0:e.breakpoint]=t[e==null?void 0:e.breakpoint]||{},t[e==null?void 0:e.breakpoint]["--app-shell-navbar-width"]="100%",t[e==null?void 0:e.breakpoint]["--app-shell-navbar-offset"]="0px"),z(r)){const a=u(S(r));s["--app-shell-navbar-width"]=a,s["--app-shell-navbar-offset"]=a}if(R(r)&&(typeof r.base<"u"&&(s["--app-shell-navbar-width"]=u(r.base),s["--app-shell-navbar-offset"]=u(r.base)),A(r).forEach(a=>{a!=="base"&&(o[a]=o[a]||{},o[a]["--app-shell-navbar-width"]=u(r[a]),o[a]["--app-shell-navbar-offset"]=u(r[a]))})),(m=e==null?void 0:e.collapsed)!=null&&m.desktop){const a=e.breakpoint;o[a]=o[a]||{},o[a]["--app-shell-navbar-transform"]=n,o[a]["--app-shell-navbar-transform-rtl"]=c,o[a]["--app-shell-navbar-offset"]="0px !important"}if((f=e==null?void 0:e.collapsed)!=null&&f.mobile){const a=re(e.breakpoint,l.breakpoints)-.1;t[a]=t[a]||{},t[a]["--app-shell-navbar-width"]="100%",t[a]["--app-shell-navbar-offset"]="0px",t[a]["--app-shell-navbar-transform"]=n,t[a]["--app-shell-navbar-transform-rtl"]=c}}function E(s){return Number(s)===0?"0px":je(s)}function Ue({padding:s,baseStyles:o,minMediaStyles:t}){z(s)&&(o["--app-shell-padding"]=E(S(s))),R(s)&&(s.base&&(o["--app-shell-padding"]=E(s.base)),A(s).forEach(e=>{e!=="base"&&(t[e]=t[e]||{},t[e]["--app-shell-padding"]=E(s[e]))}))}function Xe({navbar:s,header:o,footer:t,aside:e,padding:l,theme:r}){const n={},c={},p={};We({baseStyles:p,minMediaStyles:n,maxMediaStyles:c,navbar:s,theme:r}),Fe({baseStyles:p,minMediaStyles:n,maxMediaStyles:c,aside:e,theme:r}),He({baseStyles:p,minMediaStyles:n,header:o}),qe({baseStyles:p,minMediaStyles:n,footer:t}),Ue({baseStyles:p,minMediaStyles:n,padding:l});const m=K(A(n),r.breakpoints).map(d=>({query:`(min-width: ${Z(d.px)})`,styles:n[d.value]})),f=K(A(c),r.breakpoints).map(d=>({query:`(max-width: ${Z(d.px)})`,styles:c[d.value]})),a=[...m,...f];return{baseStyles:p,media:a}}function Je({navbar:s,header:o,aside:t,footer:e,padding:l}){const r=ee(),n=Ne(),{media:c,baseStyles:p}=Xe({navbar:s,header:o,footer:e,aside:t,padding:l,theme:r});return i.jsx(ke,{media:c,styles:p,selector:n.cssVariablesSelector})}const Ye={},W=N((s,o)=>{const t=j("AppShellNavbar",Ye,s),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,withBorder:m,zIndex:f,mod:a,...d}=t,h=I();return h.disabled?null:i.jsx(v,{component:"nav",ref:o,mod:[{"with-border":m??h.withBorder},a],...h.getStyles("navbar",{className:l,classNames:e,styles:n,style:r}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${f??h.zIndex} + 1)`}})});W.classes=k;W.displayName="@mantine/core/AppShellNavbar";const Ge={},U=we((s,o)=>{const t=j("AppShellSection",Ge,s),{classNames:e,className:l,style:r,styles:n,vars:c,grow:p,mod:m,...f}=t,a=I();return i.jsx(v,{ref:o,mod:[{grow:p},m],...a.getStyles("section",{className:l,style:r,classNames:e,styles:n}),...f})});U.classes=k;U.displayName="@mantine/core/AppShellSection";function Ze({transitionDuration:s,disabled:o}){const[t,e]=w.useState(!0),l=w.useRef(-1),r=w.useRef(-1);return ze("resize",()=>{e(!0),clearTimeout(l.current),l.current=window.setTimeout(()=>w.startTransition(()=>{e(!1)}),200)}),Be(()=>{e(!0),clearTimeout(r.current),r.current=window.setTimeout(()=>w.startTransition(()=>{e(!1)}),s||0)},[o,s]),t}const Ke={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:ae("app")},Qe=te((s,{transitionDuration:o,transitionTimingFunction:t})=>({root:{"--app-shell-transition-duration":`${o}ms`,"--app-shell-transition-timing-function":t}})),x=N((s,o)=>{const t=j("AppShell",Ke,s),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,navbar:m,withBorder:f,padding:a,transitionDuration:d,transitionTimingFunction:h,header:b,zIndex:L,layout:T,disabled:V,aside:ce,footer:pe,offsetScrollbars:he=T!=="alt",mod:me,...fe}=t,J=se({name:"AppShell",classes:k,props:t,className:l,style:r,classNames:e,styles:n,unstyled:c,vars:p,varsResolver:Qe}),de=Ze({disabled:V,transitionDuration:d});return i.jsxs(Ce,{value:{getStyles:J,withBorder:f,zIndex:L,disabled:V,offsetScrollbars:he},children:[i.jsx(Je,{navbar:m,header:b,aside:ce,footer:pe,padding:a}),i.jsx(v,{ref:o,...J("root"),mod:[{resizing:de,layout:T,disabled:V},me],...fe})]})});x.classes=k;x.displayName="@mantine/core/AppShell";x.Navbar=W;x.Header=q;x.Main=H;x.Aside=D;x.Footer=F;x.Section=U;const[Me,le]=ne("Progress.Root component was not found in tree");var $={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const es={},X=N((s,o)=>{const{classNames:t,className:e,style:l,styles:r,vars:n,...c}=j("ProgressLabel",es,s),p=le();return i.jsx(v,{ref:o,...p.getStyles("label",{className:e,style:l,classNames:t,styles:r}),...c})});X.classes=$;X.displayName="@mantine/core/ProgressLabel";const ss={},ts=te((s,{size:o,radius:t,transitionDuration:e})=>({root:{"--progress-size":_e(o,"progress-size"),"--progress-radius":t===void 0?void 0:Ae(t),"--progress-transition-duration":typeof e=="number"?`${e}ms`:void 0}})),B=N((s,o)=>{const t=j("ProgressRoot",ss,s),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,autoContrast:m,transitionDuration:f,...a}=t,d=se({name:"Progress",classes:$,props:t,className:l,style:r,classNames:e,styles:n,unstyled:c,vars:p,varsResolver:ts});return i.jsx(Me,{value:{getStyles:d,autoContrast:m},children:i.jsx(v,{ref:o,...d("root"),...a})})});B.classes=$;B.displayName="@mantine/core/ProgressRoot";const os={withAria:!0},C=N((s,o)=>{const{classNames:t,className:e,style:l,styles:r,vars:n,value:c,withAria:p,color:m,striped:f,animated:a,mod:d,...h}=j("ProgressSection",os,s),b=le(),L=ee(),T=p?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":c,"aria-valuetext":`${c}%`}:{};return i.jsx(v,{ref:o,...b.getStyles("section",{className:e,classNames:t,styles:r,style:l}),...h,...T,mod:[{striped:f||a,animated:a},d],__vars:{"--progress-section-width":`${c}%`,"--progress-section-color":Ie(m,L),"--progress-label-color":be(b.autoContrast,L)?Te({color:m,theme:L,autoContrast:b.autoContrast}):void 0}})});C.classes=$;C.displayName="@mantine/core/ProgressSection";const as={},P=N((s,o)=>{const t=j("Progress",as,s),{value:e,classNames:l,styles:r,vars:n,color:c,striped:p,animated:m,"aria-label":f,...a}=t,{resolvedClassNames:d,resolvedStyles:h}=$e({classNames:l,styles:r,props:t});return i.jsx(B,{ref:o,classNames:d,styles:h,vars:n,...a,children:i.jsx(C,{value:e,color:c,striped:p,animated:m,"aria-label":f})})});P.classes=$;P.displayName="@mantine/core/Progress";P.Section=C;P.Root=B;P.Label=X;var ns={root:"m_8f2832ae",section:"m_7a0fe999"};function ie({initialProgress:s=0,color:o,size:t=3,stepInterval:e=500,withinPortal:l=!0,portalProps:r,zIndex:n=ae("max"),store:c=Le,...p}){c.initialize({mounted:!1,progress:s,interval:-1,step:1,stepInterval:e,timeouts:[]});const m=ye(c);return w.useEffect(()=>()=>Se(c),[c]),i.jsx(Re,{...r,withinPortal:l,children:i.jsx(P,{radius:0,value:m.progress,size:t,color:o,classNames:ns,"data-mounted":m.mounted||void 0,__vars:{"--nprogress-z-index":n==null?void 0:n.toString()},...p})})}ie.displayName="@mantine/nprogress/NavigationProgress";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rs=y("outline","apps","IconApps",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 7l6 0",key:"svg-3"}],["path",{d:"M17 4l0 6",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ls=y("outline","chart-dots-3","IconChartDots3",[["path",{d:"M5 7m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M16 15m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M6 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-3"}],["path",{d:"M9 17l5 -1.5",key:"svg-4"}],["path",{d:"M6.5 8.5l7.81 5.37",key:"svg-5"}],["path",{d:"M7 7l8 -1",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var is=y("outline","dashboard","IconDashboard",[["path",{d:"M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M13.45 11.55l2.05 -2.05",key:"svg-1"}],["path",{d:"M6.4 20a9 9 0 1 1 11.2 0z",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cs=y("outline","logout-2","IconLogout2",[["path",{d:"M10 8v-2a2 2 0 0 1 2 -2h7a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2v-2",key:"svg-0"}],["path",{d:"M15 12h-12l3 -3",key:"svg-1"}],["path",{d:"M6 15l-3 -3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ps=y("outline","messages","IconMessages",[["path",{d:"M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10",key:"svg-0"}],["path",{d:"M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2",key:"svg-1"}]]);const hs="_navbar_9qhxk_1",ms="_section_9qhxk_13",fs="_mainLinks_9qhxk_35",ds="_mainLink_9qhxk_35",us="_mainLinkInner_9qhxk_63",gs="_mainLinkIcon_9qhxk_69",vs="_collectionLink_9qhxk_93",g={navbar:hs,section:ms,mainLinks:fs,mainLink:ds,mainLinkInner:us,mainLinkIcon:gs,collectionLink:vs},bs=[{icon:is,label:"Dashboard",to:"/dashboard"},{icon:ps,label:"Chat",to:"/chat"},{icon:ls,label:"Graph",to:"/graph"},{icon:rs,label:"Actions",to:"/actions"}],xs=[{emoji:"",label:"Persona Action"},{emoji:"",label:"Agent Utils"},{emoji:"",label:"DeepDoc Client Action"},{emoji:"",label:"Deepgram Speech-to-Text Action"},{emoji:"",label:"ElevenLabs Text-to-Speech Action"},{emoji:"",label:"Introductory Interact Action"},{emoji:"",label:"LangChain Model Action"},{emoji:"",label:"Persona Interact Action"},{emoji:"",label:"Phoneme Interact Action"}];function js({selectedAgentInfo:s,agents:o}){const t=bs.map(e=>i.jsx(G,{className:g.mainLink,component:Y,to:e.to,children:i.jsxs("div",{className:g.mainLinkInner,children:[i.jsx(e.icon,{size:20,className:g.mainLinkIcon,stroke:1.5}),i.jsx("span",{children:e.label})]})},e.label));return xs.map(e=>i.jsxs("a",{href:"#",onClick:l=>l.preventDefault(),className:g.collectionLink,children:[i.jsx(v,{component:"span",mr:9,fz:16,children:e.emoji})," ",e.label]},e.label)),i.jsxs("nav",{className:g.navbar,children:[i.jsx("div",{className:g.section,children:i.jsx(xe,{selectedAgentInfo:s||null,agents:o})}),i.jsx("div",{className:g.section,style:{borderBottom:"none"},children:i.jsx("div",{className:g.mainLinks,children:t})}),i.jsx("div",{className:g.section,style:{flex:1}}),i.jsx("div",{className:g.section,style:{marginBottom:0,paddingBottom:0},children:i.jsx("div",{className:g.mainLinks,style:{marginBottom:0,paddingBottom:0},children:i.jsx(G,{className:g.mainLink,component:Y,to:"/logout",children:i.jsxs("div",{className:g.mainLinkInner,children:[i.jsx(cs,{size:20,className:g.mainLinkIcon,stroke:1.5}),i.jsx("span",{children:"Logout"})]})})})})]})}const Ns=()=>{const s=Q();w.useEffect(()=>{const o=localStorage.getItem("jivas-token"),t=localStorage.getItem("jivas-token-exp");if(!o||!t){if(s.pathname!=="/login")throw _("/login");return}if(Date.now()>parseInt(t,10)&&(localStorage.removeItem("jivas-token"),localStorage.removeItem("jivas-token-exp"),s.pathname!=="/login"))throw _("/login")},[s])};function Xs({}){return[{title:"New React Router App"},{name:"description",content:"Welcome to React Router!"}]}async function Js({request:s}){var p,m,f,a,d;const o=localStorage.getItem("jivas-host"),t=localStorage.getItem("jivas-token"),e=localStorage.getItem("jivas-agent");if(!o||!t)throw _("/login");const l=e?await O(`${o}/walker/get_agent`,{method:"POST",body:JSON.stringify({agent_id:e}),headers:{"Content-Type":"application/json"}}).then(h=>{if(h.ok)return h.json();throw localStorage.removeItem("jivas-agent"),_("/login")}).catch(h=>{throw console.log({err:h}),localStorage.removeItem("jivas-agent"),_("/login")}):null,r=new FormData;r.append("args",'{"base64_prefix": false}'),r.append("module_root","actions.jivas.avatar_action"),r.append("agent_id",((m=(p=l==null?void 0:l.reports)==null?void 0:p[0])==null?void 0:m.id)||""),r.append("walker","get_avatar");const n=await O(`${o}/action/walker`,{method:"POST",body:r}).then(async h=>await h.json()).catch(()=>null),c=await O(`${o}/walker/list_agents`,{method:"POST",body:JSON.stringify({}),headers:{"Content-Type":"application/json"}}).then(h=>h.json()).catch(()=>({reports:[]}));return!((f=c==null?void 0:c.reports)!=null&&f.length)&&!s.url.includes("/new-agent")?_("/new-agent"):{selectedAgentInfo:{...((a=l==null?void 0:l.reports)==null?void 0:a[0])||{},thumbnail:!((d=n==null?void 0:n.includes)!=null&&d.call(n,"unable"))&&n&&typeof n=="string"?`data:image/png;base64,${n}`:""},agents:c==null?void 0:c.reports}}const Ys=ue(function({loaderData:o}){Ns();const[t,{toggle:e}]=Pe();return i.jsxs(i.Fragment,{children:[i.jsx(ie,{}),i.jsxs(x,{navbar:{width:300,breakpoint:"sm",collapsed:{mobile:!t}},padding:"0",children:[i.jsx(x.Navbar,{children:i.jsx(js,{selectedAgentInfo:o.selectedAgentInfo||null,agents:o.agents})}),i.jsx(x.Main,{children:i.jsx(v,{px:"lg",children:i.jsx(ks,{agents:o.agents,children:i.jsx(ge,{context:{selectedAgentInfo:o.selectedAgentInfo}})})})})]})]})});function ks({children:s,agents:o}){const t=Q(),e=ve();return t.pathname!=="/new-agent"&&!(o!=null&&o.length)?(e("/new-agent"),null):i.jsx(v,{px:"lg",children:s})}export{Js as clientLoader,Ys as default,Xs as meta};
