import{a as A,z as J,w as de,v as B,O as fe,A as ue,B as ge}from"./chunk-QMGIS6GS-CBZUm-7V.js";import{j as i}from"./jsx-runtime-D_zvdyIk.js";import{g as ve,U as be}from"./UserButton-C7P-xVhi.js";import{c as L}from"./createReactComponent-CwEnMXT7.js";import{U as Y}from"./Loader-1VreoqJz.js";import{j as N,h as j,B as v,l as K,r as u,k,m as xe,e as G,u as Q,n as je,I as Ne,p as we,i as M,o as ee,q as ke,s as Ae,t as _e}from"./polymorphic-factory-EW0USS3V.js";import{u as Pe}from"./use-disclosure-DdEYJXX4.js";import{a as Ie,u as Le,r as ye}from"./nprogress.store-CG_bDZMJ.js";import{R as se,u as ze,g as te,O as Re}from"./OptionalPortal-2PgDA1pn.js";import{u as $e}from"./Input-I-MjqIR2.js";import{c as oe}from"./create-safe-context-CzEsa9t0.js";import{a as Se}from"./Avatar-BMARKXxx.js";import{g as ae,a as Z}from"./get-sorted-breakpoints-CWbmZd_q.js";import{u as Be}from"./CloseButton-BDZlzHA2.js";import"./events-BOd7YSSb.js";import"./Group-bnACpcuK.js";import"./Text-CkpJSrnl.js";import"./Stack-BsPYYAFq.js";import"./Button-BhC08Y9X.js";import"./index-B4z8r-Ct.js";import"./use-merged-ref-DUVM9oA6.js";import"./px-CiO0pVtX.js";const[Te,_]=oe("AppShell was not found in tree");var w={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const Ce={},D=N((t,o)=>{const s=j("AppShellAside",Ce,t),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,withBorder:m,zIndex:d,mod:a,...f}=s,h=_();return h.disabled?null:i.jsx(v,{component:"aside",ref:o,mod:[{"with-border":m??h.withBorder},a],...h.getStyles("aside",{className:l,classNames:e,styles:n,style:r}),...f,__vars:{"--app-shell-aside-z-index":`calc(${d??h.zIndex} + 1)`}})});D.classes=w;D.displayName="@mantine/core/AppShellAside";const Ve={},E=N((t,o)=>{var b;const s=j("AppShellFooter",Ve,t),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,withBorder:m,zIndex:d,mod:a,...f}=s,h=_();return h.disabled?null:i.jsx(v,{component:"footer",ref:o,mod:[{"with-border":m??h.withBorder},a],...h.getStyles("footer",{className:K({[se.classNames.zeroRight]:h.offsetScrollbars},l),classNames:e,styles:n,style:r}),...f,__vars:{"--app-shell-footer-z-index":(b=d??h.zIndex)==null?void 0:b.toString()}})});E.classes=w;E.displayName="@mantine/core/AppShellFooter";const Oe={},F=N((t,o)=>{var b;const s=j("AppShellHeader",Oe,t),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,withBorder:m,zIndex:d,mod:a,...f}=s,h=_();return h.disabled?null:i.jsx(v,{component:"header",ref:o,mod:[{"with-border":m??h.withBorder},a],...h.getStyles("header",{className:K({[se.classNames.zeroRight]:h.offsetScrollbars},l),classNames:e,styles:n,style:r}),...f,__vars:{"--app-shell-header-z-index":(b=d??h.zIndex)==null?void 0:b.toString()}})});F.classes=w;F.displayName="@mantine/core/AppShellHeader";const De={},q=N((t,o)=>{const s=j("AppShellMain",De,t),{classNames:e,className:l,style:r,styles:n,vars:c,...p}=s,m=_();return i.jsx(v,{component:"main",ref:o,...m.getStyles("main",{className:l,style:r,classNames:e,styles:n}),...p})});q.classes=w;q.displayName="@mantine/core/AppShellMain";function y(t){return typeof t=="object"?t.base:t}function z(t){const o=typeof t=="object"&&t!==null&&typeof t.base<"u"&&Object.keys(t).length===1;return typeof t=="number"||typeof t=="string"||o}function R(t){return!(typeof t!="object"||t===null||Object.keys(t).length===1&&"base"in t)}function Ee({baseStyles:t,minMediaStyles:o,maxMediaStyles:s,aside:e,theme:l}){var p,m,d;const r=e==null?void 0:e.width,n="translateX(var(--app-shell-aside-width))",c="translateX(calc(var(--app-shell-aside-width) * -1))";if(e!=null&&e.breakpoint&&!((p=e==null?void 0:e.collapsed)!=null&&p.mobile)&&(s[e==null?void 0:e.breakpoint]=s[e==null?void 0:e.breakpoint]||{},s[e==null?void 0:e.breakpoint]["--app-shell-aside-width"]="100%",s[e==null?void 0:e.breakpoint]["--app-shell-aside-offset"]="0px"),z(r)){const a=u(y(r));t["--app-shell-aside-width"]=a,t["--app-shell-aside-offset"]=a}if(R(r)&&(typeof r.base<"u"&&(t["--app-shell-aside-width"]=u(r.base),t["--app-shell-aside-offset"]=u(r.base)),k(r).forEach(a=>{a!=="base"&&(o[a]=o[a]||{},o[a]["--app-shell-aside-width"]=u(r[a]),o[a]["--app-shell-aside-offset"]=u(r[a]))})),(m=e==null?void 0:e.collapsed)!=null&&m.desktop){const a=e.breakpoint;o[a]=o[a]||{},o[a]["--app-shell-aside-transform"]=n,o[a]["--app-shell-aside-transform-rtl"]=c,o[a]["--app-shell-aside-offset"]="0px !important"}if((d=e==null?void 0:e.collapsed)!=null&&d.mobile){const a=ae(e.breakpoint,l.breakpoints)-.1;s[a]=s[a]||{},s[a]["--app-shell-aside-width"]="100%",s[a]["--app-shell-aside-offset"]="0px",s[a]["--app-shell-aside-transform"]=n,s[a]["--app-shell-aside-transform-rtl"]=c}}function Fe({baseStyles:t,minMediaStyles:o,footer:s}){const e=s==null?void 0:s.height,l="translateY(var(--app-shell-footer-height))",r=(s==null?void 0:s.offset)??!0;if(z(e)){const n=u(y(e));t["--app-shell-footer-height"]=n,r&&(t["--app-shell-footer-offset"]=n)}R(e)&&(typeof e.base<"u"&&(t["--app-shell-footer-height"]=u(e.base),r&&(t["--app-shell-footer-offset"]=u(e.base))),k(e).forEach(n=>{n!=="base"&&(o[n]=o[n]||{},o[n]["--app-shell-footer-height"]=u(e[n]),r&&(o[n]["--app-shell-footer-offset"]=u(e[n])))})),s!=null&&s.collapsed&&(t["--app-shell-footer-transform"]=l,t["--app-shell-footer-offset"]="0px !important")}function qe({baseStyles:t,minMediaStyles:o,header:s}){const e=s==null?void 0:s.height,l="translateY(calc(var(--app-shell-header-height) * -1))",r=(s==null?void 0:s.offset)??!0;if(z(e)){const n=u(y(e));t["--app-shell-header-height"]=n,r&&(t["--app-shell-header-offset"]=n)}R(e)&&(typeof e.base<"u"&&(t["--app-shell-header-height"]=u(e.base),r&&(t["--app-shell-header-offset"]=u(e.base))),k(e).forEach(n=>{n!=="base"&&(o[n]=o[n]||{},o[n]["--app-shell-header-height"]=u(e[n]),r&&(o[n]["--app-shell-header-offset"]=u(e[n])))})),s!=null&&s.collapsed&&(t["--app-shell-header-transform"]=l,t["--app-shell-header-offset"]="0px !important")}function He({baseStyles:t,minMediaStyles:o,maxMediaStyles:s,navbar:e,theme:l}){var p,m,d;const r=e==null?void 0:e.width,n="translateX(calc(var(--app-shell-navbar-width) * -1))",c="translateX(var(--app-shell-navbar-width))";if(e!=null&&e.breakpoint&&!((p=e==null?void 0:e.collapsed)!=null&&p.mobile)&&(s[e==null?void 0:e.breakpoint]=s[e==null?void 0:e.breakpoint]||{},s[e==null?void 0:e.breakpoint]["--app-shell-navbar-width"]="100%",s[e==null?void 0:e.breakpoint]["--app-shell-navbar-offset"]="0px"),z(r)){const a=u(y(r));t["--app-shell-navbar-width"]=a,t["--app-shell-navbar-offset"]=a}if(R(r)&&(typeof r.base<"u"&&(t["--app-shell-navbar-width"]=u(r.base),t["--app-shell-navbar-offset"]=u(r.base)),k(r).forEach(a=>{a!=="base"&&(o[a]=o[a]||{},o[a]["--app-shell-navbar-width"]=u(r[a]),o[a]["--app-shell-navbar-offset"]=u(r[a]))})),(m=e==null?void 0:e.collapsed)!=null&&m.desktop){const a=e.breakpoint;o[a]=o[a]||{},o[a]["--app-shell-navbar-transform"]=n,o[a]["--app-shell-navbar-transform-rtl"]=c,o[a]["--app-shell-navbar-offset"]="0px !important"}if((d=e==null?void 0:e.collapsed)!=null&&d.mobile){const a=ae(e.breakpoint,l.breakpoints)-.1;s[a]=s[a]||{},s[a]["--app-shell-navbar-width"]="100%",s[a]["--app-shell-navbar-offset"]="0px",s[a]["--app-shell-navbar-transform"]=n,s[a]["--app-shell-navbar-transform-rtl"]=c}}function O(t){return Number(t)===0?"0px":xe(t)}function Ue({padding:t,baseStyles:o,minMediaStyles:s}){z(t)&&(o["--app-shell-padding"]=O(y(t))),R(t)&&(t.base&&(o["--app-shell-padding"]=O(t.base)),k(t).forEach(e=>{e!=="base"&&(s[e]=s[e]||{},s[e]["--app-shell-padding"]=O(t[e]))}))}function We({navbar:t,header:o,footer:s,aside:e,padding:l,theme:r}){const n={},c={},p={};He({baseStyles:p,minMediaStyles:n,maxMediaStyles:c,navbar:t,theme:r}),Ee({baseStyles:p,minMediaStyles:n,maxMediaStyles:c,aside:e,theme:r}),qe({baseStyles:p,minMediaStyles:n,header:o}),Fe({baseStyles:p,minMediaStyles:n,footer:s}),Ue({baseStyles:p,minMediaStyles:n,padding:l});const m=Z(k(n),r.breakpoints).map(f=>({query:`(min-width: ${G(f.px)})`,styles:n[f.value]})),d=Z(k(c),r.breakpoints).map(f=>({query:`(max-width: ${G(f.px)})`,styles:c[f.value]})),a=[...m,...d];return{baseStyles:p,media:a}}function Xe({navbar:t,header:o,aside:s,footer:e,padding:l}){const r=Q(),n=je(),{media:c,baseStyles:p}=We({navbar:t,header:o,footer:e,aside:s,padding:l,theme:r});return i.jsx(Ne,{media:c,styles:p,selector:n.cssVariablesSelector})}const Je={},H=N((t,o)=>{const s=j("AppShellNavbar",Je,t),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,withBorder:m,zIndex:d,mod:a,...f}=s,h=_();return h.disabled?null:i.jsx(v,{component:"nav",ref:o,mod:[{"with-border":m??h.withBorder},a],...h.getStyles("navbar",{className:l,classNames:e,styles:n,style:r}),...f,__vars:{"--app-shell-navbar-z-index":`calc(${d??h.zIndex} + 1)`}})});H.classes=w;H.displayName="@mantine/core/AppShellNavbar";const Ye={},U=we((t,o)=>{const s=j("AppShellSection",Ye,t),{classNames:e,className:l,style:r,styles:n,vars:c,grow:p,mod:m,...d}=s,a=_();return i.jsx(v,{ref:o,mod:[{grow:p},m],...a.getStyles("section",{className:l,style:r,classNames:e,styles:n}),...d})});U.classes=w;U.displayName="@mantine/core/AppShellSection";function Ge({transitionDuration:t,disabled:o}){const[s,e]=A.useState(!0),l=A.useRef(-1),r=A.useRef(-1);return ze("resize",()=>{e(!0),clearTimeout(l.current),l.current=window.setTimeout(()=>A.startTransition(()=>{e(!1)}),200)}),Be(()=>{e(!0),clearTimeout(r.current),r.current=window.setTimeout(()=>A.startTransition(()=>{e(!1)}),t||0)},[o,t]),s}const Ze={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:te("app")},Ke=ee((t,{transitionDuration:o,transitionTimingFunction:s})=>({root:{"--app-shell-transition-duration":`${o}ms`,"--app-shell-transition-timing-function":s}})),x=N((t,o)=>{const s=j("AppShell",Ze,t),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,navbar:m,withBorder:d,padding:a,transitionDuration:f,transitionTimingFunction:h,header:b,zIndex:I,layout:S,disabled:V,aside:le,footer:ie,offsetScrollbars:ce=S!=="alt",mod:pe,...he}=s,X=M({name:"AppShell",classes:w,props:s,className:l,style:r,classNames:e,styles:n,unstyled:c,vars:p,varsResolver:Ke}),me=Ge({disabled:V,transitionDuration:f});return i.jsxs(Te,{value:{getStyles:X,withBorder:d,zIndex:I,disabled:V,offsetScrollbars:ce},children:[i.jsx(Xe,{navbar:m,header:b,aside:le,footer:ie,padding:a}),i.jsx(v,{ref:o,...X("root"),mod:[{resizing:me,layout:S,disabled:V},pe],...he})]})});x.classes=w;x.displayName="@mantine/core/AppShell";x.Navbar=H;x.Header=F;x.Main=q;x.Aside=D;x.Footer=E;x.Section=U;const[Qe,ne]=oe("Progress.Root component was not found in tree");var $={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const Me={},W=N((t,o)=>{const{classNames:s,className:e,style:l,styles:r,vars:n,...c}=j("ProgressLabel",Me,t),p=ne();return i.jsx(v,{ref:o,...p.getStyles("label",{className:e,style:l,classNames:s,styles:r}),...c})});W.classes=$;W.displayName="@mantine/core/ProgressLabel";const es={},ss=ee((t,{size:o,radius:s,transitionDuration:e})=>({root:{"--progress-size":Ae(o,"progress-size"),"--progress-radius":s===void 0?void 0:ke(s),"--progress-transition-duration":typeof e=="number"?`${e}ms`:void 0}})),T=N((t,o)=>{const s=j("ProgressRoot",es,t),{classNames:e,className:l,style:r,styles:n,unstyled:c,vars:p,autoContrast:m,transitionDuration:d,...a}=s,f=M({name:"Progress",classes:$,props:s,className:l,style:r,classNames:e,styles:n,unstyled:c,vars:p,varsResolver:ss});return i.jsx(Qe,{value:{getStyles:f,autoContrast:m},children:i.jsx(v,{ref:o,...f("root"),...a})})});T.classes=$;T.displayName="@mantine/core/ProgressRoot";const ts={withAria:!0},C=N((t,o)=>{const{classNames:s,className:e,style:l,styles:r,vars:n,value:c,withAria:p,color:m,striped:d,animated:a,mod:f,...h}=j("ProgressSection",ts,t),b=ne(),I=Q(),S=p?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":c,"aria-valuetext":`${c}%`}:{};return i.jsx(v,{ref:o,...b.getStyles("section",{className:e,classNames:s,styles:r,style:l}),...h,...S,mod:[{striped:d||a,animated:a},f],__vars:{"--progress-section-width":`${c}%`,"--progress-section-color":_e(m,I),"--progress-label-color":ve(b.autoContrast,I)?Se({color:m,theme:I,autoContrast:b.autoContrast}):void 0}})});C.classes=$;C.displayName="@mantine/core/ProgressSection";const os={},P=N((t,o)=>{const s=j("Progress",os,t),{value:e,classNames:l,styles:r,vars:n,color:c,striped:p,animated:m,"aria-label":d,...a}=s,{resolvedClassNames:f,resolvedStyles:h}=$e({classNames:l,styles:r,props:s});return i.jsx(T,{ref:o,classNames:f,styles:h,vars:n,...a,children:i.jsx(C,{value:e,color:c,striped:p,animated:m,"aria-label":d})})});P.classes=$;P.displayName="@mantine/core/Progress";P.Section=C;P.Root=T;P.Label=W;var as={root:"m_8f2832ae",section:"m_7a0fe999"};function re({initialProgress:t=0,color:o,size:s=3,stepInterval:e=500,withinPortal:l=!0,portalProps:r,zIndex:n=te("max"),store:c=Ie,...p}){c.initialize({mounted:!1,progress:t,interval:-1,step:1,stepInterval:e,timeouts:[]});const m=Le(c);return A.useEffect(()=>()=>ye(c),[c]),i.jsx(Re,{...r,withinPortal:l,children:i.jsx(P,{radius:0,value:m.progress,size:s,color:o,classNames:as,"data-mounted":m.mounted||void 0,__vars:{"--nprogress-z-index":n==null?void 0:n.toString()},...p})})}re.displayName="@mantine/nprogress/NavigationProgress";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ns=L("outline","apps","IconApps",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M14 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M14 7l6 0",key:"svg-3"}],["path",{d:"M17 4l0 6",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rs=L("outline","chart-dots-3","IconChartDots3",[["path",{d:"M5 7m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M16 15m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M6 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-3"}],["path",{d:"M9 17l5 -1.5",key:"svg-4"}],["path",{d:"M6.5 8.5l7.81 5.37",key:"svg-5"}],["path",{d:"M7 7l8 -1",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ls=L("outline","dashboard","IconDashboard",[["path",{d:"M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M13.45 11.55l2.05 -2.05",key:"svg-1"}],["path",{d:"M6.4 20a9 9 0 1 1 11.2 0z",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var is=L("outline","logout-2","IconLogout2",[["path",{d:"M10 8v-2a2 2 0 0 1 2 -2h7a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-7a2 2 0 0 1 -2 -2v-2",key:"svg-0"}],["path",{d:"M15 12h-12l3 -3",key:"svg-1"}],["path",{d:"M6 15l-3 -3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cs=L("outline","messages","IconMessages",[["path",{d:"M21 14l-3 -3h-7a1 1 0 0 1 -1 -1v-6a1 1 0 0 1 1 -1h9a1 1 0 0 1 1 1v10",key:"svg-0"}],["path",{d:"M14 15v2a1 1 0 0 1 -1 1h-7l-3 3v-10a1 1 0 0 1 1 -1h2",key:"svg-1"}]]);const ps="_navbar_9qhxk_1",hs="_section_9qhxk_13",ms="_mainLinks_9qhxk_35",ds="_mainLink_9qhxk_35",fs="_mainLinkInner_9qhxk_63",us="_mainLinkIcon_9qhxk_69",gs="_collectionLink_9qhxk_93",g={navbar:ps,section:hs,mainLinks:ms,mainLink:ds,mainLinkInner:fs,mainLinkIcon:us,collectionLink:gs},vs=[{icon:ls,label:"Dashboard",to:"/dashboard"},{icon:cs,label:"Chat",to:"/chat"},{icon:rs,label:"Graph",to:"/graph"},{icon:ns,label:"Actions",to:"/actions"}],bs=[{emoji:"",label:"Persona Action"},{emoji:"",label:"Agent Utils"},{emoji:"",label:"DeepDoc Client Action"},{emoji:"",label:"Deepgram Speech-to-Text Action"},{emoji:"",label:"ElevenLabs Text-to-Speech Action"},{emoji:"",label:"Introductory Interact Action"},{emoji:"",label:"LangChain Model Action"},{emoji:"",label:"Persona Interact Action"},{emoji:"",label:"Phoneme Interact Action"}];function xs({selectedAgentInfo:t,agents:o}){const s=vs.map(e=>i.jsx(Y,{className:g.mainLink,component:J,to:e.to,children:i.jsxs("div",{className:g.mainLinkInner,children:[i.jsx(e.icon,{size:20,className:g.mainLinkIcon,stroke:1.5}),i.jsx("span",{children:e.label})]})},e.label));return bs.map(e=>i.jsxs("a",{href:"#",onClick:l=>l.preventDefault(),className:g.collectionLink,children:[i.jsx(v,{component:"span",mr:9,fz:16,children:e.emoji})," ",e.label]},e.label)),i.jsxs("nav",{className:g.navbar,children:[i.jsx("div",{className:g.section,children:i.jsx(be,{selectedAgentInfo:t||null,agents:o})}),i.jsx("div",{className:g.section,style:{borderBottom:"none"},children:i.jsx("div",{className:g.mainLinks,children:s})}),i.jsx("div",{className:g.section,style:{flex:1}}),i.jsx("div",{className:g.section,style:{marginBottom:0,paddingBottom:0},children:i.jsx("div",{className:g.mainLinks,style:{marginBottom:0,paddingBottom:0},children:i.jsx(Y,{className:g.mainLink,component:J,to:"/logout",children:i.jsxs("div",{className:g.mainLinkInner,children:[i.jsx(is,{size:20,className:g.mainLinkIcon,stroke:1.5}),i.jsx("span",{children:"Logout"})]})})})})]})}function Hs({}){return[{title:"New React Router App"},{name:"description",content:"Welcome to React Router!"}]}async function Us({request:t}){var p,m,d,a,f;const o=localStorage.getItem("jivas-host"),s=localStorage.getItem("jivas-token"),e=localStorage.getItem("jivas-agent");if(!o||!s)throw B("/login");const l=e?await fetch(`${o}/walker/get_agent`,{method:"POST",body:JSON.stringify({agent_id:e}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}}).then(h=>{if(h.ok)return h.json();throw localStorage.removeItem("jivas-agent"),B("/login")}).catch(h=>{throw console.log({err:h}),localStorage.removeItem("jivas-agent"),B("/login")}):null,r=new FormData;r.append("args",'{"base64_prefix": false}'),r.append("module_root","actions.jivas.avatar_action"),r.append("agent_id",((m=(p=l==null?void 0:l.reports)==null?void 0:p[0])==null?void 0:m.id)||""),r.append("walker","get_avatar");const n=await fetch(`${o}/action/walker`,{method:"POST",headers:{Authorization:`Bearer ${s}`},body:r}).then(async h=>await h.json()).catch(()=>null),c=await fetch(`${o}/walker/list_agents`,{method:"POST",body:JSON.stringify({}),headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`}}).then(h=>h.json()).catch(()=>({reports:[]}));return!((d=c==null?void 0:c.reports)!=null&&d.length)&&!t.url.includes("/new-agent")?B("/new-agent"):{selectedAgentInfo:{...((a=l==null?void 0:l.reports)==null?void 0:a[0])||{},thumbnail:!((f=n==null?void 0:n.includes)!=null&&f.call(n,"unable"))&&n&&typeof n=="string"?`data:image/png;base64,${n}`:""},agents:c==null?void 0:c.reports}}const Ws=de(function({loaderData:o}){const[s,{toggle:e}]=Pe();return i.jsxs(i.Fragment,{children:[i.jsx(re,{}),i.jsxs(x,{navbar:{width:300,breakpoint:"sm",collapsed:{mobile:!s}},padding:"0",children:[i.jsx(x.Navbar,{children:i.jsx(xs,{selectedAgentInfo:o.selectedAgentInfo||null,agents:o.agents})}),i.jsx(x.Main,{children:i.jsx(v,{px:"lg",children:i.jsx(js,{agents:o.agents,children:i.jsx(fe,{context:{selectedAgentInfo:o.selectedAgentInfo}})})})})]})]})});function js({children:t,agents:o}){const s=ue(),e=ge();return s.pathname!=="/new-agent"&&!(o!=null&&o.length)?(e("/new-agent"),null):i.jsx(v,{px:"lg",children:t})}export{Us as clientLoader,Ws as default,Hs as meta};
